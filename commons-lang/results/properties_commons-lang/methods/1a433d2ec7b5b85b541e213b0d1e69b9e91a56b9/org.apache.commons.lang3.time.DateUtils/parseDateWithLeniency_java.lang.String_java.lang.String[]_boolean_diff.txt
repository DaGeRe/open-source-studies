                                                                                                     | private static Date parseDateWithLeniency(String str, String[] parsePatterns, boolean lenient) throw
                                                                                                     | if (str == null || parsePatterns == null) {                                                         
                                                                                                     | throw new IllegalArgumentException("Date and Patterns must not be null");                           
                                                                                                     | }                                                                                                   
                                                                                                     | SimpleDateFormat parser = null;                                                                     
                                                                                                     | ParsePosition pos = new ParsePosition(0);                                                           
                                                                                                     | for (int i = 0; i &lt; parsePatterns.length; i++) {                                                 
                                                                                                     | String pattern = parsePatterns[i];                                                                  
                                                                                                     | // LANG-530 - need to make sure 'ZZ' output doesn't get passed to SimpleDateFormat                  
                                                                                                     | if (parsePatterns[i].endsWith("ZZ")) {                                                              
                                                                                                     | pattern = pattern.substring(0, pattern.length() - 1);                                               
                                                                                                     | }                                                                                                   
                                                                                                     | if (i == 0) {                                                                                       
                                                                                                     | parser = new SimpleDateFormat(pattern);                                                             
                                                                                                     | parser.setLenient(lenient);                                                                         
                                                                                                     | } else {                                                                                            
                                                                                                     | // cannot be null if i != 0                                                                         
                                                                                                     | parser.applyPattern(pattern);                                                                       
                                                                                                     | }                                                                                                   
                                                                                                     | pos.setIndex(0);                                                                                    
                                                                                                     | String str2 = str;                                                                                  
                                                                                                     | // LANG-530 - need to make sure 'ZZ' output doesn't hit SimpleDateFormat as it will ParseException  
                                                                                                     | if (parsePatterns[i].endsWith("ZZ")) {                                                              
                                                                                                     | str2 = str.replaceAll("([-+][0-9][0-9]):([0-9][0-9])$", "$1$2");                                    
                                                                                                     | }                                                                                                   
                                                                                                     | Date date = parser.parse(str2, pos);                                                                
                                                                                                     | if (date != null && pos.getIndex() == str2.length()) {                                              
                                                                                                     | return date;                                                                                        
                                                                                                     | }                                                                                                   
                                                                                                     | }                                                                                                   
                                                                                                     | throw new ParseException("Unable to parse the date: " + str, -1);                                   
                                                                                                     | }                                                                                                   
