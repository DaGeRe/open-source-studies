/* (non-Javadoc)                                                                                       /* (non-Javadoc)                                                                                    
* @see org.apache.commons.lang3.time.DateParser#parse(java.lang.String, java.text.ParsePosition)       * @see org.apache.commons.lang3.time.DateParser#parse(java.lang.String, java.text.ParsePosition)    
*/                                                                                                     */                                                                                                  
@Override                                                                                            |                                                                                                     
public Date parse(String source, ParsePosition pos) {                                                  public Date parse(String source, ParsePosition pos) {                                               
int offset = pos.getIndex();                                                                           int offset = pos.getIndex();                                                                        
Matcher matcher = parsePattern.matcher(source.substring(offset));                                      Matcher matcher = parsePattern.matcher(source.substring(offset));                                   
if (!matcher.lookingAt()) {                                                                            if (!matcher.lookingAt()) {                                                                         
return null;                                                                                           return null;                                                                                        
}                                                                                                      }                                                                                                   
// timing tests indicate getting new instance is 19% faster than cloning                               // timing tests indicate getting new instance is 19% faster than cloning                            
Calendar cal = Calendar.getInstance(timeZone, locale);                                                 Calendar cal = Calendar.getInstance(timeZone, locale);                                              
cal.clear();                                                                                           cal.clear();                                                                                        
for (int i = 0; i &lt; strategies.length; ) {                                                          for (int i = 0; i &lt; strategies.length; ) {                                                       
Strategy strategy = strategies[i++];                                                                   Strategy strategy = strategies[i++];                                                                
strategy.setCalendar(this, cal, matcher.group(i));                                                     strategy.setCalendar(this, cal, matcher.group(i));                                                  
}                                                                                                      }                                                                                                   
pos.setIndex(offset + matcher.end());                                                                  pos.setIndex(offset + matcher.end());                                                               
return cal.getTime();                                                                                  return cal.getTime();                                                                               
}                                                                                                      }                                                                                                   
