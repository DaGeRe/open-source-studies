/**                                                                                                    /**                                                                                                 
* Test Objects pointing to each other.                                                                 * Test Objects pointing to each other.                                                              
*/                                                                                                     */                                                                                                  
                                                                                                     | @Test                                                                                               
public void testReflectionObjectCycle() {                                                              public void testReflectionObjectCycle() {                                                           
ReflectionTestCycleA a = new ReflectionTestCycleA();                                                   ReflectionTestCycleA a = new ReflectionTestCycleA();                                                
ReflectionTestCycleB b = new ReflectionTestCycleB();                                                   ReflectionTestCycleB b = new ReflectionTestCycleB();                                                
a.b = b;                                                                                               a.b = b;                                                                                            
b.a = a;                                                                                               b.a = a;                                                                                            
// Used to caused:                                                                                     // Used to caused:                                                                                  
// java.lang.StackOverflowError                                                                        // java.lang.StackOverflowError                                                                     
// at java.lang.ClassLoader.getCallerClassLoader(Native Method)                                        // at java.lang.ClassLoader.getCallerClassLoader(Native Method)                                     
// at java.lang.Class.getDeclaredFields(Class.java:992)                                                // at java.lang.Class.getDeclaredFields(Class.java:992)                                             
// at org.apache.commons.lang.builder.HashCodeBuilder.reflectionAppend(HashCodeBuilder.java:373)       // at org.apache.commons.lang.builder.HashCodeBuilder.reflectionAppend(HashCodeBuilder.java:373)    
// at org.apache.commons.lang.builder.HashCodeBuilder.reflectionHashCode(HashCodeBuilder.java:349)     // at org.apache.commons.lang.builder.HashCodeBuilder.reflectionHashCode(HashCodeBuilder.java:349)  
// at org.apache.commons.lang.builder.HashCodeBuilder.reflectionHashCode(HashCodeBuilder.java:155)     // at org.apache.commons.lang.builder.HashCodeBuilder.reflectionHashCode(HashCodeBuilder.java:155)  
// at                                                                                                  // at                                                                                               
// org.apache.commons.lang.builder.HashCodeBuilderTest$ReflectionTestCycleB.hashCode(HashCodeBuilder   // org.apache.commons.lang.builder.HashCodeBuilderTest$ReflectionTestCycleB.hashCode(HashCodeBuilder
// at org.apache.commons.lang.builder.HashCodeBuilder.append(HashCodeBuilder.java:422)                 // at org.apache.commons.lang.builder.HashCodeBuilder.append(HashCodeBuilder.java:422)              
// at org.apache.commons.lang.builder.HashCodeBuilder.reflectionAppend(HashCodeBuilder.java:383)       // at org.apache.commons.lang.builder.HashCodeBuilder.reflectionAppend(HashCodeBuilder.java:383)    
// at org.apache.commons.lang.builder.HashCodeBuilder.reflectionHashCode(HashCodeBuilder.java:349)     // at org.apache.commons.lang.builder.HashCodeBuilder.reflectionHashCode(HashCodeBuilder.java:349)  
// at org.apache.commons.lang.builder.HashCodeBuilder.reflectionHashCode(HashCodeBuilder.java:155)     // at org.apache.commons.lang.builder.HashCodeBuilder.reflectionHashCode(HashCodeBuilder.java:155)  
// at                                                                                                  // at                                                                                               
// org.apache.commons.lang.builder.HashCodeBuilderTest$ReflectionTestCycleA.hashCode(HashCodeBuilder   // org.apache.commons.lang.builder.HashCodeBuilderTest$ReflectionTestCycleA.hashCode(HashCodeBuilder
// at org.apache.commons.lang.builder.HashCodeBuilder.append(HashCodeBuilder.java:422)                 // at org.apache.commons.lang.builder.HashCodeBuilder.append(HashCodeBuilder.java:422)              
a.hashCode();                                                                                          a.hashCode();                                                                                       
assertNull(HashCodeBuilder.getRegistry());                                                             assertNull(HashCodeBuilder.getRegistry());                                                          
b.hashCode();                                                                                          b.hashCode();                                                                                       
assertNull(HashCodeBuilder.getRegistry());                                                             assertNull(HashCodeBuilder.getRegistry());                                                          
}                                                                                                      }                                                                                                   
