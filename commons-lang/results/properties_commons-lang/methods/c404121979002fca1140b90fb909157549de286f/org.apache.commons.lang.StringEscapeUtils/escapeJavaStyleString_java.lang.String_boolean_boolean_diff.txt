/**                                                                                                  |                                                                                                     
* &lt;p&gt;Worker method for the {@link #escapeJavaScript(String)} method.&lt;/p&gt;                 |                                                                                                     
*                                                                                                    |                                                                                                     
* @param str String to escape values in, may be null                                                 |                                                                                                     
* @param escapeSingleQuotes escapes single quotes if &lt;code&gt;true&lt;/code&gt;                   |                                                                                                     
* @param escapeForwardSlash TODO                                                                     |                                                                                                     
* @return the escaped string                                                                         |                                                                                                     
*/                                                                                                   |                                                                                                     
private static String escapeJavaStyleString(String str, boolean escapeSingleQuotes, boolean escapeFo |                                                                                                     
if (str == null) {                                                                                   |                                                                                                     
return null;                                                                                         |                                                                                                     
}                                                                                                    |                                                                                                     
try {                                                                                                |                                                                                                     
StringWriter writer = new StringWriter(str.length() * 2);                                            |                                                                                                     
escapeJavaStyleString(writer, str, escapeSingleQuotes, escapeForwardSlash);                          |                                                                                                     
return writer.toString();                                                                            |                                                                                                     
} catch (IOException ioe) {                                                                          |                                                                                                     
// this should never ever happen while writing to a StringWriter                                     |                                                                                                     
throw new UnhandledException(ioe);                                                                   |                                                                                                     
}                                                                                                    |                                                                                                     
}                                                                                                    |                                                                                                     
