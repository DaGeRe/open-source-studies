/**                                                                                                    /**                                                                                                 
* &lt;p&gt;Writes a &lt;code&gt;String&lt;/code&gt; value for a CSV column enclosed in double quotes   * &lt;p&gt;Writes a &lt;code&gt;String&lt;/code&gt; value for a CSV column enclosed in double quotes
* if required.&lt;/p&gt;                                                                               * if required.&lt;/p&gt;                                                                            
*                                                                                                      *                                                                                                   
* &lt;p&gt;If the value contains a comma, newline or double quote, then the                            * &lt;p&gt;If the value contains a comma, newline or double quote, then the                         
*    String value is written enclosed in double quotes.&lt;/p&gt;                                      *    String value is written enclosed in double quotes.&lt;/p&gt;                                   
* &lt;/p&gt;                                                                                           * &lt;/p&gt;                                                                                        
*                                                                                                      *                                                                                                   
* &lt;p&gt;Any double quote characters in the value are escaped with another double quote.&lt;/p&gt;   * &lt;p&gt;Any double quote characters in the value are escaped with another double quote.&lt;/p&gt;
*                                                                                                      *                                                                                                   
* &lt;p&gt;If the value does not contain a comma, newline or double quote, then the                    * &lt;p&gt;If the value does not contain a comma, newline or double quote, then the                 
*    String value is written unchanged (null values are ignored).&lt;/p&gt;                            *    String value is written unchanged (null values are ignored).&lt;/p&gt;                         
* &lt;/p&gt;                                                                                           * &lt;/p&gt;                                                                                        
*                                                                                                      *                                                                                                   
* see &lt;a href="http://en.wikipedia.org/wiki/Comma-separated_values"&gt;Wikipedia&lt;/a&gt; and      * see &lt;a href="http://en.wikipedia.org/wiki/Comma-separated_values"&gt;Wikipedia&lt;/a&gt; and   
* &lt;a href="http://tools.ietf.org/html/rfc4180"&gt;RFC 4180&lt;/a&gt;.                               * &lt;a href="http://tools.ietf.org/html/rfc4180"&gt;RFC 4180&lt;/a&gt;.                            
*                                                                                                      *                                                                                                   
* @param str the input CSV column String, may be null                                                  * @param str the input CSV column String, may be null                                               
* @param out Writer to write input string to, enclosed in double quotes if it contains                 * @param out Writer to write input string to, enclosed in double quotes if it contains              
* a comma, newline or double quote                                                                     * a comma, newline or double quote                                                                  
* @throws IOException if error occurs on underlying Writer                                             * @throws IOException if error occurs on underlying Writer                                          
* @since 2.4                                                                                           * @since 2.4                                                                                        
*/                                                                                                     */                                                                                                  
public static void escapeCsv(Writer out, String str) throws IOException {                              public static void escapeCsv(Writer out, String str) throws IOException {                           
if (StringUtils.containsNone(str, CSV_SEARCH_CHARS)) {                                               | EscapeUtils.ESCAPE_CSV.translate(str, out);                                                         
if (str != null) {                                                                                   |                                                                                                     
out.write(str);                                                                                      |                                                                                                     
}                                                                                                      }                                                                                                   
return;                                                                                              |                                                                                                     
}                                                                                                    |                                                                                                     
out.write(CSV_QUOTE);                                                                                |                                                                                                     
for (int i = 0; i &lt; str.length(); i++) {                                                          |                                                                                                     
char c = str.charAt(i);                                                                              |                                                                                                     
if (c == CSV_QUOTE) {                                                                                |                                                                                                     
// escape double quote                                                                               |                                                                                                     
out.write(CSV_QUOTE);                                                                                |                                                                                                     
}                                                                                                    |                                                                                                     
out.write(c);                                                                                        |                                                                                                     
}                                                                                                    |                                                                                                     
out.write(CSV_QUOTE);                                                                                |                                                                                                     
}                                                                                                    |                                                                                                     
