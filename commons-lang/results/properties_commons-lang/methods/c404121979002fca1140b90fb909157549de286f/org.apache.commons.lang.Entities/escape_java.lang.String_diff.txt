/**                                                                                                  |                                                                                                     
* &lt;p&gt;                                                                                          |                                                                                                     
* Escapes the characters in a &lt;code&gt;String&lt;/code&gt;.                                       |                                                                                                     
* &lt;/p&gt;                                                                                         |                                                                                                     
*                                                                                                    |                                                                                                     
* &lt;p&gt;                                                                                          |                                                                                                     
* For example, if you have called addEntity(&quot;foo&quot;, 0xA1), escape(&quot;\u00A1&quot;) will  |                                                                                                     
* &quot;&amp;foo;&quot;                                                                              |                                                                                                     
* &lt;/p&gt;                                                                                         |                                                                                                     
*                                                                                                    |                                                                                                     
* @param str                                                                                         |                                                                                                     
*            The &lt;code&gt;String&lt;/code&gt; to escape.                                          |                                                                                                     
* @return A new escaped &lt;code&gt;String&lt;/code&gt;.                                             |                                                                                                     
*/                                                                                                   |                                                                                                     
public String escape(String str) {                                                                   |                                                                                                     
StringWriter stringWriter = createStringWriter(str);                                                 |                                                                                                     
try {                                                                                                |                                                                                                     
this.escape(stringWriter, str);                                                                      |                                                                                                     
} catch (IOException e) {                                                                            |                                                                                                     
// This should never happen because ALL the StringWriter methods called by #escape(Writer, String) d |                                                                                                     
// throw IOExceptions.                                                                               |                                                                                                     
throw new UnhandledException(e);                                                                     |                                                                                                     
}                                                                                                    |                                                                                                     
return stringWriter.toString();                                                                      |                                                                                                     
}                                                                                                    |                                                                                                     
