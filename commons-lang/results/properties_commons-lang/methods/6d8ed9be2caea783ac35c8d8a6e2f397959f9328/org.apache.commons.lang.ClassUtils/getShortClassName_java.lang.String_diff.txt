/**                                                                                                    /**                                                                                                 
* &lt;p&gt;Gets the class name minus the package name from a String.&lt;/p&gt;                         * &lt;p&gt;Gets the class name minus the package name from a String.&lt;/p&gt;                      
*                                                                                                      *                                                                                                   
* &lt;p&gt;The string passed in is assumed to be a class name - it is not checked.&lt;/p&gt;           * &lt;p&gt;The string passed in is assumed to be a class name - it is not checked.&lt;/p&gt;        
*                                                                                                      *                                                                                                   
* @param className  the className to get the short name for                                            * @param className  the className to get the short name for                                         
* @return the class name of the class without the package name or an empty string                      * @return the class name of the class without the package name or an empty string                   
*/                                                                                                     */                                                                                                  
public static String getShortClassName(String className) {                                             public static String getShortClassName(String className) {                                          
if (className == null) {                                                                               if (className == null) {                                                                            
return StringUtils.EMPTY;                                                                              return StringUtils.EMPTY;                                                                           
}                                                                                                      }                                                                                                   
if (className.length() == 0) {                                                                         if (className.length() == 0) {                                                                      
return StringUtils.EMPTY;                                                                              return StringUtils.EMPTY;                                                                           
}                                                                                                      }                                                                                                   
StringBuffer arrayPrefix = new StringBuffer();                                                       | StringBuilder arrayPrefix = new StringBuilder();                                                    
// Handle array encoding                                                                               // Handle array encoding                                                                            
if (className.startsWith("[")) {                                                                       if (className.startsWith("[")) {                                                                    
while (className.charAt(0) == '[') {                                                                   while (className.charAt(0) == '[') {                                                                
className = className.substring(1);                                                                    className = className.substring(1);                                                                 
arrayPrefix.append("[]");                                                                              arrayPrefix.append("[]");                                                                           
}                                                                                                      }                                                                                                   
// Strip Object type encoding                                                                          // Strip Object type encoding                                                                       
if (className.charAt(0) == 'L' && className.charAt(className.length() - 1) == ';') {                   if (className.charAt(0) == 'L' && className.charAt(className.length() - 1) == ';') {                
className = className.substring(1, className.length() - 1);                                            className = className.substring(1, className.length() - 1);                                         
}                                                                                                      }                                                                                                   
}                                                                                                      }                                                                                                   
if (reverseAbbreviationMap.containsKey(className)) {                                                   if (reverseAbbreviationMap.containsKey(className)) {                                                
className = reverseAbbreviationMap.get(className);                                                     className = reverseAbbreviationMap.get(className);                                                  
}                                                                                                      }                                                                                                   
int lastDotIdx = className.lastIndexOf(PACKAGE_SEPARATOR_CHAR);                                        int lastDotIdx = className.lastIndexOf(PACKAGE_SEPARATOR_CHAR);                                     
int innerIdx = className.indexOf(INNER_CLASS_SEPARATOR_CHAR, lastDotIdx == -1 ? 0 : lastDotIdx + 1);   int innerIdx = className.indexOf(INNER_CLASS_SEPARATOR_CHAR, lastDotIdx == -1 ? 0 : lastDotIdx + 1);
String out = className.substring(lastDotIdx + 1);                                                      String out = className.substring(lastDotIdx + 1);                                                   
if (innerIdx != -1) {                                                                                  if (innerIdx != -1) {                                                                               
out = out.replace(INNER_CLASS_SEPARATOR_CHAR, PACKAGE_SEPARATOR_CHAR);                                 out = out.replace(INNER_CLASS_SEPARATOR_CHAR, PACKAGE_SEPARATOR_CHAR);                              
}                                                                                                      }                                                                                                   
return out + arrayPrefix;                                                                              return out + arrayPrefix;                                                                           
}                                                                                                      }                                                                                                   
