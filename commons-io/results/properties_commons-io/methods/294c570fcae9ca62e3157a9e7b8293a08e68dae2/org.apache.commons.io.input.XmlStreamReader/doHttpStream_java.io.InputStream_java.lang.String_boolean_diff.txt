private void doHttpStream(InputStream is, String httpContentType, boolean lenient) throws IOExceptio | private String doHttpStream(InputStream is, String httpContentType, boolean lenient) throws IOExcept
BOMInputStream bom = new BOMInputStream(new BufferedInputStream(is, BUFFER_SIZE), false, BOMS);        BOMInputStream bom = new BOMInputStream(new BufferedInputStream(is, BUFFER_SIZE), false, BOMS);     
BOMInputStream pis = new BOMInputStream(bom, true, XML_GUESS_BYTES);                                   BOMInputStream pis = new BOMInputStream(bom, true, XML_GUESS_BYTES);                                
String bomEnc = bom.getBOMCharsetName();                                                               String bomEnc = bom.getBOMCharsetName();                                                            
String xmlGuessEnc = pis.getBOMCharsetName();                                                          String xmlGuessEnc = pis.getBOMCharsetName();                                                       
String xmlEnc = getXmlProlog(pis, xmlGuessEnc);                                                        String xmlEnc = getXmlProlog(pis, xmlGuessEnc);                                                     
try {                                                                                                  try {                                                                                               
this.encoding = calculateHttpEncoding(httpContentType, bomEnc, xmlGuessEnc, xmlEnc, lenient);        | return calculateHttpEncoding(httpContentType, bomEnc, xmlGuessEnc, xmlEnc, lenient);                
} catch (XmlStreamReaderException ex) {                                                                } catch (XmlStreamReaderException ex) {                                                             
if (lenient) {                                                                                         if (lenient) {                                                                                      
this.encoding = doLenientDetection(httpContentType, is, ex);                                         | return doLenientDetection(httpContentType, is, ex);                                                 
} else {                                                                                               } else {                                                                                            
throw ex;                                                                                              throw ex;                                                                                           
}                                                                                                      }                                                                                                   
}                                                                                                      }                                                                                                   
this.reader = new InputStreamReader(is, encoding);                                                   |                                                                                                     
}                                                                                                      }                                                                                                   
