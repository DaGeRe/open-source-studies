@Test                                                                                                  @Test                                                                                               
public void test() throws Exception {                                                                  public void test() throws Exception {                                                               
for (int i = 256; i &lt; 8192; i = i * 2) {                                                            for (int i = 256; i &lt; 8192; i = i * 2) {                                                         
final byte[] buffer = generateRandomByteStream(i);                                                     final byte[] buffer = generateRandomByteStream(i);                                                  
final MessageDigest md5Sum = MessageDigest.getInstance("MD5");                                         final MessageDigest md5Sum = MessageDigest.getInstance("MD5");                                      
final byte[] expect = md5Sum.digest(buffer);                                                           final byte[] expect = md5Sum.digest(buffer);                                                        
final MessageDigestCalculatingInputStream md5InputStream = new MessageDigestCalculatingInputStream(n | try (final MessageDigestCalculatingInputStream md5InputStream = new MessageDigestCalculatingInputStr
md5InputStream.consume();                                                                              md5InputStream.consume();                                                                           
final byte[] got = md5InputStream.getMessageDigest().digest();                                         final byte[] got = md5InputStream.getMessageDigest().digest();                                      
assertArrayEquals(expect, got);                                                                        assertArrayEquals(expect, got);                                                                     
}                                                                                                      }                                                                                                   
}                                                                                                      }                                                                                                   
                                                                                                     | }                                                                                                   
