public ByteOrderMark getBOM() throws IOException {                                                     public ByteOrderMark getBOM() throws IOException {                                                  
readFirstBytes();                                                                                    | if (firstBytes == null) {                                                                           
                                                                                                     | int max = 0;                                                                                        
                                                                                                     | for (ByteOrderMark bom : boms) {                                                                    
                                                                                                     | max = Math.max(max, bom.length());                                                                  
                                                                                                     | }                                                                                                   
                                                                                                     | firstBytes = new int[max];                                                                          
                                                                                                     | for (int i = 0; i &lt; firstBytes.length; i++) {                                                    
                                                                                                     | firstBytes[i] = in.read();                                                                          
                                                                                                     | fbLength++;                                                                                         
                                                                                                     | if (firstBytes[i] &lt; 0) {                                                                         
                                                                                                     | break;                                                                                              
                                                                                                     | }                                                                                                   
                                                                                                     | byteOrderMark = find();                                                                             
                                                                                                     | if (byteOrderMark != null) {                                                                        
                                                                                                     | if (!include) {                                                                                     
                                                                                                     | fbLength = 0;                                                                                       
                                                                                                     | }                                                                                                   
                                                                                                     | break;                                                                                              
                                                                                                     | }                                                                                                   
                                                                                                     | }                                                                                                   
                                                                                                     | }                                                                                                   
return byteOrderMark;                                                                                  return byteOrderMark;                                                                               
}                                                                                                      }                                                                                                   
