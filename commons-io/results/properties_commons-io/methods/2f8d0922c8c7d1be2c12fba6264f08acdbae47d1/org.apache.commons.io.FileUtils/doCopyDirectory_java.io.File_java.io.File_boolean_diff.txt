private static void doCopyDirectory(File srcDir, File destDir, boolean preserveFileDate) throws IOEx |                                                                                                     
if (destDir.exists()) {                                                                              |                                                                                                     
if (destDir.isDirectory() == false) {                                                                |                                                                                                     
throw new IOException("Destination '" + destDir + "' exists but is not a directory");                |                                                                                                     
}                                                                                                    |                                                                                                     
} else {                                                                                             |                                                                                                     
if (destDir.mkdirs() == false) {                                                                     |                                                                                                     
throw new IOException("Destination '" + destDir + "' directory cannot be created");                  |                                                                                                     
}                                                                                                    |                                                                                                     
if (preserveFileDate) {                                                                              |                                                                                                     
destDir.setLastModified(srcDir.lastModified());                                                      |                                                                                                     
}                                                                                                    |                                                                                                     
}                                                                                                    |                                                                                                     
if (destDir.canWrite() == false) {                                                                   |                                                                                                     
throw new IOException("Destination '" + destDir + "' cannot be written to");                         |                                                                                                     
}                                                                                                    |                                                                                                     
File[] files = srcDir.listFiles();                                                                   |                                                                                                     
if (files == null) {                                                                                 |                                                                                                     
throw new IOException("Failed to list contents of " + srcDir);                                       |                                                                                                     
}                                                                                                    |                                                                                                     
for (int i = 0; i &lt; files.length; i++) {                                                          |                                                                                                     
File copiedFile = new File(destDir, files[i].getName());                                             |                                                                                                     
if (files[i].isDirectory()) {                                                                        |                                                                                                     
doCopyDirectory(files[i], copiedFile, preserveFileDate);                                             |                                                                                                     
} else {                                                                                             |                                                                                                     
doCopyFile(files[i], copiedFile, preserveFileDate);                                                  |                                                                                                     
}                                                                                                    |                                                                                                     
}                                                                                                    |                                                                                                     
}                                                                                                    |                                                                                                     
