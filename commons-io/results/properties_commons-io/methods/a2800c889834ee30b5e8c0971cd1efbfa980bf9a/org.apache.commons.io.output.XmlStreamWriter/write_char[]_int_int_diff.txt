                                                                                                     | @Override                                                                                           
public void write(char[] cbuf, int off, int len) throws IOException {                                  public void write(char[] cbuf, int off, int len) throws IOException {                               
if (xmlPrologWriter != null) {                                                                         if (xmlPrologWriter != null) {                                                                      
detectEncoding(cbuf, off, len);                                                                        detectEncoding(cbuf, off, len);                                                                     
} else {                                                                                               } else {                                                                                            
writer.write(cbuf, off, len);                                                                          writer.write(cbuf, off, len);                                                                       
}                                                                                                      }                                                                                                   
}                                                                                                      }                                                                                                   
