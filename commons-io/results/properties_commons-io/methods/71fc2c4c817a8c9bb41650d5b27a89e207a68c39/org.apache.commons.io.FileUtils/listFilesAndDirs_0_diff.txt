public static Collection&lt;File&gt; listFilesAndDirs(final File directory, final IOFileFilter fileF   public static Collection&lt;File&gt; listFilesAndDirs(final File directory, final IOFileFilter fileF
validateListFilesParameters(directory, fileFilter);                                                    validateListFilesParameters(directory, fileFilter);                                                 
final IOFileFilter effFileFilter = setUpEffectiveFileFilter(fileFilter);                               final IOFileFilter effFileFilter = setUpEffectiveFileFilter(fileFilter);                            
final IOFileFilter effDirFilter = setUpEffectiveDirFilter(dirFilter);                                  final IOFileFilter effDirFilter = setUpEffectiveDirFilter(dirFilter);                               
final Collection&lt;File&gt; files = new java.util.LinkedList&lt;&gt;();                               final Collection&lt;File&gt; files = new java.util.LinkedList&lt;&gt;();                            
if (directory.isDirectory()) {                                                                       |                                                                                                     
files.add(directory);                                                                                  files.add(directory);                                                                               
}                                                                                                    |                                                                                                     
innerListFiles(files, directory, FileFilterUtils.or(effFileFilter, effDirFilter), true);               innerListFiles(files, directory, FileFilterUtils.or(effFileFilter, effDirFilter), true);            
return files;                                                                                          return files;                                                                                       
}                                                                                                      }                                                                                                   
