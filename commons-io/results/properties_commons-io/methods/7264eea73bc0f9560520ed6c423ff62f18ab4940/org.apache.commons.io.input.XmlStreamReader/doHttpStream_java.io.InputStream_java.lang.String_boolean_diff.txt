private void doHttpStream(InputStream is, String httpContentType, boolean lenient) throws IOExceptio   private void doHttpStream(InputStream is, String httpContentType, boolean lenient) throws IOExceptio
BOMInputStream bom = new BOMInputStream(new BufferedInputStream(is, BUFFER_SIZE), false, BOMS);        BOMInputStream bom = new BOMInputStream(new BufferedInputStream(is, BUFFER_SIZE), false, BOMS);     
BOMInputStream pis = new BOMInputStream(bom, true, XML_GUESS_BYTES);                                   BOMInputStream pis = new BOMInputStream(bom, true, XML_GUESS_BYTES);                                
String cTMime = getContentTypeMime(httpContentType);                                                 |                                                                                                     
String cTEnc = getContentTypeEncoding(httpContentType);                                              |                                                                                                     
String bomEnc = bom.getBOMCharsetName();                                                               String bomEnc = bom.getBOMCharsetName();                                                            
String xmlGuessEnc = pis.getBOMCharsetName();                                                          String xmlGuessEnc = pis.getBOMCharsetName();                                                       
String xmlEnc = getXmlProlog(pis, xmlGuessEnc);                                                        String xmlEnc = getXmlProlog(pis, xmlGuessEnc);                                                     
this.encoding = calculateHttpEncoding(cTMime, cTEnc, bomEnc, xmlGuessEnc, xmlEnc, lenient);          | this.encoding = calculateHttpEncoding(httpContentType, bomEnc, xmlGuessEnc, xmlEnc, lenient);       
this.reader = new InputStreamReader(is, encoding);                                                     this.reader = new InputStreamReader(is, encoding);                                                  
}                                                                                                      }                                                                                                   
