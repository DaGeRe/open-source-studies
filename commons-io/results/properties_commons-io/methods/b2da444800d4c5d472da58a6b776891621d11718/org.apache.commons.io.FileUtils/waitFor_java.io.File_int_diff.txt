public static boolean waitFor(final File file, final int seconds) {                                    public static boolean waitFor(final File file, final int seconds) {                                 
long finishAt = System.currentTimeMillis() + (seconds * 1000);                                       | long finishAt = System.currentTimeMillis() + (seconds * 1000L);                                     
boolean wasInterrupted = false;                                                                        boolean wasInterrupted = false;                                                                     
try {                                                                                                  try {                                                                                               
while (!file.exists()) {                                                                               while (!file.exists()) {                                                                            
long remaining = finishAt - System.currentTimeMillis();                                                long remaining = finishAt - System.currentTimeMillis();                                             
if (remaining &lt; 0) {                                                                                if (remaining &lt; 0) {                                                                             
return false;                                                                                          return false;                                                                                       
}                                                                                                      }                                                                                                   
try {                                                                                                  try {                                                                                               
Thread.sleep(Math.min(100, remaining));                                                                Thread.sleep(Math.min(100, remaining));                                                             
} catch (final InterruptedException ignore) {                                                          } catch (final InterruptedException ignore) {                                                       
wasInterrupted = true;                                                                                 wasInterrupted = true;                                                                              
} catch (final Exception ex) {                                                                         } catch (final Exception ex) {                                                                      
break;                                                                                                 break;                                                                                              
}                                                                                                      }                                                                                                   
}                                                                                                      }                                                                                                   
} finally {                                                                                            } finally {                                                                                         
if (wasInterrupted) {                                                                                  if (wasInterrupted) {                                                                               
Thread.currentThread().interrupt();                                                                    Thread.currentThread().interrupt();                                                                 
}                                                                                                      }                                                                                                   
}                                                                                                      }                                                                                                   
return true;                                                                                           return true;                                                                                        
}                                                                                                      }                                                                                                   
