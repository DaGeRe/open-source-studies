@Override                                                                                              @Override                                                                                           
public void run() {                                                                                    public void run() {                                                                                 
RandomAccessFile reader = null;                                                                        RandomAccessFile reader = null;                                                                     
try {                                                                                                  try {                                                                                               
long last = 0;                                                                                         long last = 0;                                                                                      
long position = 0;                                                                                     long position = 0;                                                                                  
while (getRun() && reader == null) {                                                                   while (getRun() && reader == null) {                                                                
try {                                                                                                  try {                                                                                               
reader = new RandomAccessFile(file, RAF_MODE);                                                         reader = new RandomAccessFile(file, RAF_MODE);                                                      
} catch (final FileNotFoundException e) {                                                              } catch (final FileNotFoundException e) {                                                           
listener.fileNotFound();                                                                               listener.fileNotFound();                                                                            
}                                                                                                      }                                                                                                   
if (reader == null) {                                                                                  if (reader == null) {                                                                               
Thread.sleep(delayMillis);                                                                             Thread.sleep(delayMillis);                                                                          
} else {                                                                                               } else {                                                                                            
position = end ? file.length() : 0;                                                                    position = end ? file.length() : 0;                                                                 
last = file.lastModified();                                                                            last = file.lastModified();                                                                         
reader.seek(position);                                                                                 reader.seek(position);                                                                              
}                                                                                                      }                                                                                                   
}                                                                                                      }                                                                                                   
while (getRun()) {                                                                                     while (getRun()) {                                                                                  
final boolean newer = FileUtils.isFileNewer(file, last);                                               final boolean newer = FileUtils.isFileNewer(file, last);                                            
final long length = file.length();                                                                     final long length = file.length();                                                                  
if (length &lt; position) {                                                                            if (length &lt; position) {                                                                         
listener.fileRotated();                                                                                listener.fileRotated();                                                                             
try (RandomAccessFile save = reader) {                                                                 try (RandomAccessFile save = reader) {                                                              
reader = new RandomAccessFile(file, RAF_MODE);                                                         reader = new RandomAccessFile(file, RAF_MODE);                                                      
try {                                                                                                  try {                                                                                               
readLines(save);                                                                                       readLines(save);                                                                                    
} catch (final IOException ioe) {                                                                      } catch (final IOException ioe) {                                                                   
listener.handle(ioe);                                                                                  listener.handle(ioe);                                                                               
}                                                                                                      }                                                                                                   
position = 0;                                                                                          position = 0;                                                                                       
} catch (final FileNotFoundException e) {                                                              } catch (final FileNotFoundException e) {                                                           
listener.fileNotFound();                                                                               listener.fileNotFound();                                                                            
Thread.sleep(delayMillis);                                                                             Thread.sleep(delayMillis);                                                                          
}                                                                                                      }                                                                                                   
continue;                                                                                              continue;                                                                                           
} else {                                                                                             | }                                                                                                   
if (length &gt; position) {                                                                            if (length &gt; position) {                                                                         
position = readLines(reader);                                                                          position = readLines(reader);                                                                       
last = file.lastModified();                                                                            last = file.lastModified();                                                                         
} else if (newer) {                                                                                    } else if (newer) {                                                                                 
position = 0;                                                                                          position = 0;                                                                                       
reader.seek(position);                                                                                 reader.seek(position);                                                                              
position = readLines(reader);                                                                          position = readLines(reader);                                                                       
last = file.lastModified();                                                                            last = file.lastModified();                                                                         
}                                                                                                      }                                                                                                   
}                                                                                                    |                                                                                                     
if (reOpen && reader != null) {                                                                        if (reOpen && reader != null) {                                                                     
reader.close();                                                                                        reader.close();                                                                                     
}                                                                                                      }                                                                                                   
Thread.sleep(delayMillis);                                                                             Thread.sleep(delayMillis);                                                                          
if (getRun() && reOpen) {                                                                              if (getRun() && reOpen) {                                                                           
reader = new RandomAccessFile(file, RAF_MODE);                                                         reader = new RandomAccessFile(file, RAF_MODE);                                                      
reader.seek(position);                                                                                 reader.seek(position);                                                                              
}                                                                                                      }                                                                                                   
}                                                                                                      }                                                                                                   
} catch (final InterruptedException e) {                                                               } catch (final InterruptedException e) {                                                            
Thread.currentThread().interrupt();                                                                    Thread.currentThread().interrupt();                                                                 
listener.handle(e);                                                                                    listener.handle(e);                                                                                 
} catch (final Exception e) {                                                                          } catch (final Exception e) {                                                                       
listener.handle(e);                                                                                    listener.handle(e);                                                                                 
} finally {                                                                                            } finally {                                                                                         
try {                                                                                                  try {                                                                                               
if (reader != null) {                                                                                  if (reader != null) {                                                                               
reader.close();                                                                                        reader.close();                                                                                     
}                                                                                                      }                                                                                                   
} catch (final IOException e) {                                                                        } catch (final IOException e) {                                                                     
listener.handle(e);                                                                                    listener.handle(e);                                                                                 
}                                                                                                      }                                                                                                   
stop();                                                                                                stop();                                                                                             
}                                                                                                      }                                                                                                   
}                                                                                                      }                                                                                                   
