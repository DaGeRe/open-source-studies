public static long sizeOfDirectory(File directory) {                                                   public static long sizeOfDirectory(File directory) {                                                
if (!directory.exists()) {                                                                             if (!directory.exists()) {                                                                          
String message = directory + " does not exist";                                                        String message = directory + " does not exist";                                                     
throw new IllegalArgumentException(message);                                                           throw new IllegalArgumentException(message);                                                        
}                                                                                                      }                                                                                                   
if (!directory.isDirectory()) {                                                                        if (!directory.isDirectory()) {                                                                     
String message = directory + " is not a directory";                                                    String message = directory + " is not a directory";                                                 
throw new IllegalArgumentException(message);                                                           throw new IllegalArgumentException(message);                                                        
}                                                                                                      }                                                                                                   
long size = 0;                                                                                         long size = 0;                                                                                      
File[] files = directory.listFiles();                                                                  File[] files = directory.listFiles();                                                               
if (files == null) {                                                                                   if (files == null) {                                                                                
return 0L;                                                                                             return 0L;                                                                                          
}                                                                                                      }                                                                                                   
for (File file : files) {                                                                              for (File file : files) {                                                                           
if (file.isDirectory()) {                                                                            | size += sizeOf(file);                                                                               
size += sizeOfDirectory(file);                                                                       |                                                                                                     
} else {                                                                                             |                                                                                                     
size += file.length();                                                                               |                                                                                                     
}                                                                                                      }                                                                                                   
}                                                                                                    |                                                                                                     
return size;                                                                                           return size;                                                                                        
}                                                                                                      }                                                                                                   
