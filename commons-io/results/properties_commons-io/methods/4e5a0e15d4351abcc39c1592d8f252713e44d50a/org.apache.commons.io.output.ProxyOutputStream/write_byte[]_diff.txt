@Override                                                                                              @Override                                                                                           
public void write(byte[] bts) throws IOException {                                                     public void write(byte[] bts) throws IOException {                                                  
try {                                                                                                  try {                                                                                               
beforeWrite(bts.length);                                                                             | beforeWrite(bts != null ? bts.length : 0);                                                          
out.write(bts);                                                                                        out.write(bts);                                                                                     
afterWrite(bts.length);                                                                                afterWrite(bts.length);                                                                             
} catch (IOException e) {                                                                              } catch (IOException e) {                                                                           
handleIOException(e);                                                                                  handleIOException(e);                                                                               
}                                                                                                      }                                                                                                   
}                                                                                                      }                                                                                                   
