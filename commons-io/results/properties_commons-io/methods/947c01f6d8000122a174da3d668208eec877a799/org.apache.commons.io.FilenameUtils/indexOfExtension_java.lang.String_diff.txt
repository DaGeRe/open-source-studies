public static int indexOfExtension(final String filename) {                                          | public static int indexOfExtension(final String filename) throws NtfsAdsNameException {             
if (filename == null) {                                                                                if (filename == null) {                                                                             
return NOT_FOUND;                                                                                      return NOT_FOUND;                                                                                   
}                                                                                                      }                                                                                                   
                                                                                                     | if (isSystemWindows()) {                                                                            
                                                                                                     | final int offset = filename.indexOf(':', getAdsCriticalOffset(filename));                           
                                                                                                     | if (offset != -1) {                                                                                 
                                                                                                     | throw new NtfsAdsNameException("NTFS ADS separator (':') in filename is forbidden.");               
                                                                                                     | }                                                                                                   
                                                                                                     | }                                                                                                   
final int extensionPos = filename.lastIndexOf(EXTENSION_SEPARATOR);                                    final int extensionPos = filename.lastIndexOf(EXTENSION_SEPARATOR);                                 
final int lastSeparator = indexOfLastSeparator(filename);                                              final int lastSeparator = indexOfLastSeparator(filename);                                           
return lastSeparator &gt; extensionPos ? NOT_FOUND : extensionPos;                                     return lastSeparator &gt; extensionPos ? NOT_FOUND : extensionPos;                                  
}                                                                                                      }                                                                                                   
