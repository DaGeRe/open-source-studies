List performCommand(String[] cmdAttribs, int max) throws IOException {                               | List&lt;String&gt; performCommand(String[] cmdAttribs, int max) throws IOException {                
List lines = new ArrayList(20);                                                                      | List&lt;String&gt; lines = new ArrayList&lt;String&gt;(20);                                         
Process proc = null;                                                                                   Process proc = null;                                                                                
InputStream in = null;                                                                                 InputStream in = null;                                                                              
OutputStream out = null;                                                                               OutputStream out = null;                                                                            
InputStream err = null;                                                                                InputStream err = null;                                                                             
BufferedReader inr = null;                                                                             BufferedReader inr = null;                                                                          
try {                                                                                                  try {                                                                                               
proc = openProcess(cmdAttribs);                                                                        proc = openProcess(cmdAttribs);                                                                     
in = proc.getInputStream();                                                                            in = proc.getInputStream();                                                                         
out = proc.getOutputStream();                                                                          out = proc.getOutputStream();                                                                       
err = proc.getErrorStream();                                                                           err = proc.getErrorStream();                                                                        
inr = new BufferedReader(new InputStreamReader(in));                                                   inr = new BufferedReader(new InputStreamReader(in));                                                
String line = inr.readLine();                                                                          String line = inr.readLine();                                                                       
while (line != null && lines.size() &lt; max) {                                                        while (line != null && lines.size() &lt; max) {                                                     
line = line.toLowerCase().trim();                                                                      line = line.toLowerCase().trim();                                                                   
lines.add(line);                                                                                       lines.add(line);                                                                                    
line = inr.readLine();                                                                                 line = inr.readLine();                                                                              
}                                                                                                      }                                                                                                   
proc.waitFor();                                                                                        proc.waitFor();                                                                                     
if (proc.exitValue() != 0) {                                                                           if (proc.exitValue() != 0) {                                                                        
throw new IOException("Command line returned OS error code '" + proc.exitValue() + "' for command "    throw new IOException("Command line returned OS error code '" + proc.exitValue() + "' for command " 
}                                                                                                      }                                                                                                   
if (lines.size() == 0) {                                                                               if (lines.size() == 0) {                                                                            
throw new IOException("Command line did not return any info " + "for command " + Arrays.asList(cmdAt   throw new IOException("Command line did not return any info " + "for command " + Arrays.asList(cmdAt
}                                                                                                      }                                                                                                   
return lines;                                                                                          return lines;                                                                                       
} catch (InterruptedException ex) {                                                                    } catch (InterruptedException ex) {                                                                 
throw new IOException("Command line threw an InterruptedException '" + ex.getMessage() + "' for comm   throw new IOException("Command line threw an InterruptedException '" + ex.getMessage() + "' for comm
} finally {                                                                                            } finally {                                                                                         
IOUtils.closeQuietly(in);                                                                              IOUtils.closeQuietly(in);                                                                           
IOUtils.closeQuietly(out);                                                                             IOUtils.closeQuietly(out);                                                                          
IOUtils.closeQuietly(err);                                                                             IOUtils.closeQuietly(err);                                                                          
IOUtils.closeQuietly(inr);                                                                             IOUtils.closeQuietly(inr);                                                                          
if (proc != null) {                                                                                    if (proc != null) {                                                                                 
proc.destroy();                                                                                        proc.destroy();                                                                                     
}                                                                                                      }                                                                                                   
}                                                                                                      }                                                                                                   
}                                                                                                      }                                                                                                   
