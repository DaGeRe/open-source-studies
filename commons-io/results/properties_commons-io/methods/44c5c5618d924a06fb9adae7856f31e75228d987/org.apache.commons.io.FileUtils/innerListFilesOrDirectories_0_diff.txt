private static Collection&lt;File&gt; innerListFilesOrDirectories(final File directory, final IOFile | private static Collection&lt;File&gt; innerListFilesOrDirectories(final File directory, final IOFile
validateListFilesParameters(directory, fileFilter);                                                    validateListFilesParameters(directory, fileFilter);                                                 
final IOFileFilter effFileFilter = setUpEffectiveFileFilter(fileFilter);                               final IOFileFilter effFileFilter = setUpEffectiveFileFilter(fileFilter);                            
final IOFileFilter effDirFilter = setUpEffectiveDirFilter(dirFilter);                                  final IOFileFilter effDirFilter = setUpEffectiveDirFilter(dirFilter);                               
final Collection&lt;File&gt; files = new java.util.LinkedList&lt;&gt;();                               final Collection&lt;File&gt; files = new java.util.LinkedList&lt;&gt;();                            
if (includeSubDirectories) {                                                                           if (includeSubDirectories) {                                                                        
files.add(directory);                                                                                  files.add(directory);                                                                               
}                                                                                                      }                                                                                                   
innerListFiles(files, directory, FileFilterUtils.or(effFileFilter, effDirFilter), includeSubDirector   innerListFiles(files, directory, FileFilterUtils.or(effFileFilter, effDirFilter), includeSubDirector
return files;                                                                                          return files;                                                                                       
}                                                                                                      }                                                                                                   
